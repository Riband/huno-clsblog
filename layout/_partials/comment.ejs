<% var hc_post_comments=''; %>
<% if(theme.hc_post_comments) {hc_post_comments= theme.hc_post_comments;} %>
<% if(config.hc_post_comments) {hc_post_comments= config.hc_post_comments;} %>
<% if(page.hc_post_comments) {hc_post_comments= page.hc_post_comments;} %>

<% if(hc_post_comments === 'manual') { %>
    <section class="post-comments">
        <!-- 将评论系统（例如Disqus、友言、畅言等）提供的代码片段粘贴在这里 -->
    </section>
<% } %>

<!-- Gitment Support -->
<% if(hc_post_comments === 'gitment') { %>
  <noscript>Please enable JavaScript to view the comments</noscript>
    <section class="post-comments">
        <div id="container"></div>
    </section>
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    <script>
        const hc_default_theme = {
            render(state, instance) {
                const container = document.createElement('div')
                container.lang = "en-US"
                container.className = 'gitment-container gitment-root-container'
                container.appendChild(instance.renderHeader(state, instance))
                container.appendChild(instance.renderEditor(state, instance))
                container.appendChild(instance.renderComments(state, instance))
                return container
            },
            }

      var gitment = new Gitment({
        owner: '<%- theme.hc_github_config.owner %>',
        repo: '<%- theme.hc_github_config.repo %>',
        oauth: {
          client_id: '<%- theme.hc_github_config.client_id %>',
          client_secret: '<%- theme.hc_github_config.client_secret %>',
        },
        theme: hc_default_theme
      })
      gitment.render('container');
    </script>

<% } %>

<!-- Gitalk Support -->
<% if(hc_post_comments === 'gitalk') { %>

    <noscript>Please enable JavaScript to view the comments</noscript>
    <section class="post-comments">
        <div id="gitalk-container"></div>
    </section>
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var gitalk = new Gitalk({
        clientID: "<%- theme.hc_github_config.client_id %>",
        clientSecret: "<%- theme.hc_github_config.client_secret %>",
        repo: "<%- theme.hc_github_config.repo %>",
        owner:"<%- theme.hc_github_config.owner %>",
            admin: "<%- theme.hc_github_config.admin %>",
            id: location.pathname,      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
        })
        gitalk.render('gitalk-container');
    </script>

<% } %>